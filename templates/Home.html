<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Media and Mental Health Survey</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab, #7b2ff7, #f120e4);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: floatPattern 20s linear infinite;
      pointer-events: none;
    }

    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      25% {
        background-position: 50% 100%;
      }
      50% {
        background-position: 100% 50%;
      }
      75% {
        background-position: 50% 0%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes floatPattern {
      0% {
        transform: translate(0, 0);
      }
      100% {
        transform: translate(50px, 50px);
      }
    }

    .container {
      background: rgba(255, 255, 255, 0.98);
      padding: 40px;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 100px rgba(255, 255, 255, 0.1) inset;
      width: 100%;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      position: relative;
      z-index: 1;
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, #ee7752, #e73c7e, #23a6d5, #23d5ab, #7b2ff7, #f120e4);
      background-size: 200% 100%;
      animation: borderShift 3s linear infinite;
      border-radius: 24px 24px 0 0;
    }

    @keyframes borderShift {
      0% {
        background-position: 0% 0%;
      }
      100% {
        background-position: 200% 0%;
      }
    }

    h2 {
      text-align: center;
      background: linear-gradient(135deg, #e73c7e, #23a6d5, #7b2ff7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0 0 30px 0;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .form-group {
      margin-bottom: 24px;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
      color: #34495e;
      font-size: 15px;
    }

    select,
    input[type="number"] {
      width: 100%;
      padding: 12px 16px;
      margin: 0;
      border-radius: 10px;
      border: 2px solid #e0e0e0;
      font-size: 15px;
      transition: all 0.3s ease;
      background: white;
    }

    select:focus,
    input:focus {
      border-color: #0078d7;
      box-shadow: 0 0 0 3px rgba(0, 120, 215, 0.1);
      outline: none;
    }

    select:hover,
    input:hover {
      border-color: #bbb;
    }

    .checkbox-group {
      margin-top: 8px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
    }

    .checkbox-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-right: 10px;
      cursor: pointer;
      accent-color: #0078d7;
    }

    .checkbox-item label {
      margin: 0;
      font-weight: 500;
      cursor: pointer;
      user-select: none;
    }

    button {
      width: 100%;
      margin-top: 30px;
      padding: 16px;
      background: linear-gradient(135deg, #e73c7e 0%, #7b2ff7 50%, #23a6d5 100%);
      background-size: 200% 100%;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.4s ease;
      box-shadow: 0 8px 25px rgba(123, 47, 247, 0.4);
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(123, 47, 247, 0.5);
      background-position: 100% 0;
    }

    button:hover::before {
      left: 100%;
    }

    button:active {
      transform: translateY(-1px);
    }

    .scale-hint {
      font-size: 13px;
      color: #7f8c8d;
      margin-top: 4px;
    }

    /* Hide scrollbar */
    .container::-webkit-scrollbar {
      display: none;
    }

    .container {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .result-section {
      margin-top: 30px;
      padding: 30px;
      background: linear-gradient(135deg, rgba(231, 60, 126, 0.1), rgba(35, 166, 213, 0.1));
      border-radius: 16px;
      border: 2px solid rgba(123, 47, 247, 0.3);
      display: none;
      animation: slideIn 0.5s ease;
    }

    .result-section.show {
      display: block;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-title {
      text-align: center;
      font-size: 20px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .result-category {
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, #e73c7e, #7b2ff7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
      padding: 10px;
    }

    .result-icon {
      text-align: center;
      font-size: 60px;
      margin-bottom: 15px;
    }

    .result-description {
      text-align: center;
      color: #555;
      line-height: 1.6;
      font-size: 15px;
    }

    .loading {
      text-align: center;
      color: #7b2ff7;
      font-weight: 600;
      display: none;
      margin-top: 15px;
    }

    .loading.show {
      display: block;
    }

    .error-message {
      background: #fee;
      border: 2px solid #fcc;
      color: #c33;
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    @media (max-width: 600px) {
      .container {
        padding: 25px;
      }

      h2 {
        font-size: 24px;
      }

      .checkbox-group {
        grid-template-columns: 1fr;
      }

      .result-category {
        font-size: 22px;
      }

      .result-icon {
        font-size: 50px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Social Media and Mental Health Survey</h2>
    <form id="surveyForm" action="/predict" method="post">

      <div class="form-group">
        <label for="age">Age:</label>
        <input type="number" id="age" name="age" min="10" max="100" required>
      </div>

      <div class="form-group">
        <label for="gender">Gender:</label>
        <select id="gender" name="gender" required>
          <option value="">Select</option>
          <option value="m">Male</option>
          <option value="f">Female</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="relationship">Relationship Status:</label>
        <select id="relationship" name="relationship" required>
          <option value="">Select</option>
          <option value="Single">Single</option>
          <option value="In a relationship">In a Relationship</option>
          <option value="Married">Married</option>
          <option value="Divorced">Divorced</option>
        </select>
      </div>

      <div class="form-group">
        <label for="occupation">Occupation Status:</label>
        <select id="occupation" name="Occupation_Status" required>
          <option value="">Select</option>
          <option value="University Student">University Student</option>
          <option value="School Student">School Student</option>
          <option value="Salaried Worker">Salaried Worker</option>
          <option value="Retired">Retired</option>
        </select>
      </div>

      <div class="form-group">
        <label for="use_social_media">Do you use social media?</label>
        <select id="use_social_media" name="use_social_media" required>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label for="average_time">Average time spent on social media:</label>
        <select id="average_time" name="average_time_spent" required>
          <option value="">Select</option>
          <option value="Less than an Hour">Less than an Hour</option>
          <option value="Between 1 and 2 hours">Between 1 and 2 hours</option>
          <option value="Between 2 and 3 hours">Between 2 and 3 hours</option>
          <option value="Between 3 and 4 hours">Between 3 and 4 hours</option>
          <option value="Between 4 and 5 hours">Between 4 and 5 hours</option>
          <option value="More than 5 hours">More than 5 hours</option>
        </select>
      </div>

      <div class="form-group">
        <label for="without_purpose">Using social media without a specific purpose:</label>
        <input type="number" id="without_purpose" name="using_social_media_without_purpose" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="distracted">Distracted by social media while working:</label>
        <input type="number" id="distracted" name="distracted_by_social_media" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="restless">Feel restless if haven't used social media:</label>
        <input type="number" id="restless" name="feel_restless" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="easily_distracted">How easily distracted are you?</label>
        <input type="number" id="easily_distracted" name="easily_distracted" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Not at all) to 5 (Extremely)</div>
      </div>

      <div class="form-group">
        <label for="worries">How much are you bothered by worries?</label>
        <input type="number" id="worries" name="bothered_by_worries" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Not at all) to 5 (Extremely)</div>
      </div>

      <div class="form-group">
        <label for="concentrate">Find it difficult to concentrate on things:</label>
        <input type="number" id="concentrate" name="difficult_to_concentrate" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="compare">How often do you compare yourself?</label>
        <input type="number" id="compare" name="compare_yourself" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="validation">Seek validation from social media features:</label>
        <input type="number" id="validation" name="seek_validation" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="depressed">Feel depressed or down:</label>
        <input type="number" id="depressed" name="feel_depressed" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="interest">How frequently does your interest fluctuate daily?</label>
        <input type="number" id="interest" name="interest_fluctuate" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label for="sleep">Sleep issue:</label>
        <input type="number" id="sleep" name="sleep_issue" min="1" max="5" required>
        <div class="scale-hint">Scale: 1 (Never) to 5 (Always)</div>
      </div>

      <div class="form-group">
        <label>Which social media platforms do you use?</label>
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="hidden" name="instagram" value="0">
            <input type="checkbox" id="instagram" name="instagram" value="1">
            <label for="instagram">Instagram</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="snapchat" value="0">
            <input type="checkbox" id="snapchat" name="snapchat" value="1">
            <label for="snapchat">Snapchat</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="facebook" value="0">
            <input type="checkbox" id="facebook" name="facebook" value="1">
            <label for="facebook">Facebook</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="twitter" value="0">
            <input type="checkbox" id="twitter" name="twitter" value="1">
            <label for="twitter">Twitter (X)</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="youtube" value="0">
            <input type="checkbox" id="youtube" name="youtube" value="1">
            <label for="youtube">YouTube</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="reddit" value="0">
            <input type="checkbox" id="reddit" name="reddit" value="1">
            <label for="reddit">Reddit</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="whatsapp" value="0">
            <input type="checkbox" id="whatsapp" name="whatsapp" value="1">
            <label for="whatsapp">WhatsApp</label>
          </div>
          <div class="checkbox-item">
            <input type="hidden" name="linkedin" value="0">
            <input type="checkbox" id="linkedin" name="linkedin" value="1">
            <label for="linkedin">LinkedIn</label>
          </div>
        </div>
      </div>

      <button type="submit">Submit</button>

      <div class="loading" id="loading">
        🔄 Analyzing your responses...
      </div>
      
      <div class="error-message" id="errorMessage"></div>
      
      <div class="result-section" id="resultSection">
        <div class="result-icon" id="resultIcon"></div>
        <div class="result-title">Your Social Media Usage Profile</div>
        <div class="result-category" id="resultCategory"></div>
        <div class="result-description" id="resultDescription"></div>
      </div>
    </form>
  </div>

  <script>
    const form = document.getElementById('surveyForm');
    const loading = document.getElementById('loading');
    const errorMessage = document.getElementById('errorMessage');
    const resultSection = document.getElementById('resultSection');
    const resultIcon = document.getElementById('resultIcon');
    const resultCategory = document.getElementById('resultCategory');
    const resultDescription = document.getElementById('resultDescription');

    const categoryInfo = {
      'Mature Light Users': {
        icon: '✅',
        description: 'You demonstrate healthy social media habits with balanced usage patterns. You maintain good control over your social media consumption and show minimal signs of problematic usage.'
      },
      'Highly Addicted Youth': {
        icon: '⚠️',
        description: 'Your responses indicate high levels of social media dependency. Consider taking steps to reduce usage time, set boundaries, and seek support if social media is negatively impacting your mental health or daily life.'
      },
      'Moderate Student Users': {
        icon: '📊',
        description: 'You show moderate social media usage patterns typical of students. While you use social media regularly, you maintain reasonable control. Consider monitoring your usage to prevent it from escalating.'
      }
    };

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Hide previous results and errors
      resultSection.classList.remove('show');
      errorMessage.classList.remove('show');
      loading.classList.add('show');

      // Collect form data (use FormData to send as form data, not JSON)
      const formData = new FormData(form);
      console.log(formData)
      try {
        const response = await fetch('/predict', {
          method: 'POST',
          body: formData  // Send as form data to match your Flask request.form.get()
        });

        if (!response.ok) {
          throw new Error('Failed to get prediction from server');
        }

        const result = await response.json();
        
        // Display result
        loading.classList.remove('show');
        
        const category = result.prediction;
        const info = categoryInfo[category];
        
        if (info) {
          resultIcon.textContent = info.icon;
          resultCategory.textContent = category;
          resultDescription.textContent = info.description;
          resultSection.classList.add('show');
          
          // Smooth scroll to results
          setTimeout(() => {
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 100);
        } else {
          throw new Error('Unknown category: ' + category);
        }

      } catch (error) {
        loading.classList.remove('show');
        errorMessage.textContent = '❌ Error: ' + error.message;
        errorMessage.classList.add('show');
        console.error('Prediction error:', error);
      }
    });
  </script>
</body>
</html>